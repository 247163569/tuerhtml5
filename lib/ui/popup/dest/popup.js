define("popup",function(require,e,t){function i(e,t,i,n,s){var r=n&&n[0];s.delegateEvents(r?n:t,r?e+" "+t.selector:e,function(e){i.call(e.currentTarget,e)})}var n=sjs,s=require("overlay"),r=s.extend({attrs:{trigger:{value:null,getter:function(e){return n(e)}},triggerType:"hover",delegateNode:{value:null,getter:function(e){return n(e)}},align:{value:{baseXY:[0,"100%"],selfXY:[0,0]},setter:function(e){return e?(e.baseElement?this._specifiedBaseElement=!0:this.activeTrigger&&(e.baseElement=this.activeTrigger),e):e},getter:function(e){return n.extend({},e,this._specifiedBaseElement?{}:{baseElement:this.activeTrigger})}},delay:70,disabled:!1,effect:"",duration:250},setup:function(){r.superclass.setup.call(this),this._bindTrigger(),this._blurHide(this.get("trigger")),this.activeTrigger=this.get("trigger").eq(0)},show:function(){return this.get("disabled")?this:r.superclass.show.call(this)},_bindTrigger:function(){var e=this.get("triggerType");"click"===e?this._bindClick():"focus"===e?this._bindFocus():this._bindHover()},_bindClick:function(){function e(e){t.get("disabled")||t.get("trigger").each(function(i,s){e==s?(s._active=!0,t.activeTrigger=n(s)):s._active=!1})}var t=this;i("click",this.get("trigger"),function(i){"a"===this.tagName.toLowerCase()&&i.preventDefault(),this._active===!0?t.hide():(e(this),t.show())},this.get("delegateNode"),this),this.before("hide",function(){e()})},_bindFocus:function(){var e=this;i("focus",this.get("trigger"),function(){e.activeTrigger=n(this),e.show()},this.get("delegateNode"),this),i("blur",this.get("trigger"),function(){setTimeout(function(){!e._downOnElement&&e.hide(),e._downOnElement=!1},e.get("delay"))},this.get("delegateNode"),this),this.delegateEvents("mousedown",function(){this._downOnElement=!0})},_bindHover:function(){function e(){clearTimeout(t),t=null,l.get("visible")&&(s=setTimeout(function(){l.hide()},a))}var t,s,r=this.get("trigger"),o=this.get("delegateNode"),a=this.get("delay"),l=this;return 0>a?(this._bindTooltip(),void 0):(i("mouseenter",r,function(){clearTimeout(s),s=null,l.activeTrigger=n(this),t=setTimeout(function(){l.show()},a)},o,this),i("mouseleave",r,e,o,this),this.delegateEvents("mouseenter",function(){clearTimeout(s)}),this.delegateEvents("mouseleave",e),void 0)},_bindTooltip:function(){var e=this.get("trigger"),t=this.get("delegateNode"),s=this;i("mouseenter",e,function(){s.activeTrigger=n(this),s.show()},t,this),i("mouseleave",e,function(){s.hide()},t,this)},_onRenderVisible:function(e){var t=-1!==this.get("effect").indexOf("fade"),i=-1!==this.get("effect").indexOf("slide"),n={};i&&(n.height=e?"show":"hide"),t&&(n.opacity=e?"show":"hide"),t||i?this.element.stop(!0,!0).animate(n,this.get("duration")).css({visibility:"visible"}):this.element[e?"show":"hide"]()}});t.exports=r});